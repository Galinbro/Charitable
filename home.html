<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">


    <title>Charitable</title>

    <style>
      body, html {
        max-width: 100%;
        overflow-x: hidden;
        font-family: 'Poppins', sans-serif;
        height: 100%
      }
      #gg {
      opacity: 0;
      -webkit-transition: all 1.4s ease-in-out;
      -moz-transition: all 1.4s ease-in-out;
      -ms-transition: all 1.4s ease-in-out;
      -o-transition: all 1.4s ease-in-out;
      transition: all 1.4s ease-in-out;
      }
      .bg {
        /* The image used */
        background-image: url("https://atos.net/wp-content/uploads/2018/06/atos-btn-nl-abf-1400x500px.jpg");
      
        /* Full height */
        height: 100%; 
        position: relative;
        /* Center and scale the image nicely */
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
      }

      .bg2 {
        /* The image used */
        background-image: url("https://atos.net/wp-content/uploads/2018/06/atos-btn-nl-abf-1400x500px.jpg");
      
        /* Full height */
        height: 100%; 
        position: absolute;
        /* Center and scale the image nicely */
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
      }

      #wrapper_top {
        height: 100%; 
        position: relative;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
      }

      #wrapper_bottom {
        top: 0;
        height: 100%;
        position: absolute;
        width: 100%;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
      }

      #bar {
        animation: slide-left 3s;
      }
      
      #formBtn {
        animation: slide-left 3s;
      }
      @keyframes slide-left {
        from {
          margin-left: 100%;
        }
      
        to {
          margin-left: 0%;
        }
      }
      .typewriter h3 {
        animation: updown 2s ease;
        
      }

      .updow {
        animation: downup 2s linear  
      }
      
      @keyframes updown {
        0% {
          transform: translateY(-100%);
        }

        100% {
          transform: translateY(0);
        }
      } 

      @keyframes downup {
        0% {
          transform: translateY(100%);
        }

        100% {
          transform: translateY(0);
        }
      }
     
img {
  width: 50%;
  padding: 20px 0 20px 20px;
}

h1 {
  color:#FFF;
  font-weight:bold;
  text-align:center;
  margin-top:55px;
  letter-spacing: 10px;
  font-weight: 700;
}

.column {
  float: left;
  width: 50%;
  padding: 10px;
}

.row {
  margin: 0px;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

.card {
  margin: 0 10px 0 10px;
}

.grafica {
  width: 70vh;
  
  padding-left: 0px;

}

.form-control {
  border-radius: .4em;
  /* border-color: #0066A1; */
  border-width: 0px; 
  background-color: #b2d9eed7;
  border-color: #b2d9eed7;
}

.select {
  width: 50%;
  padding-left: 0px;
}
.justify-content-center{
  margin-top: 33px;
}

.btn {
  height: 35px;
  font-size: inherit;
  padding-top: 4px;
}

.form {
  background-color: rgba(0,102,161,0.5);
  
  transition: 2s ease;
}

  
  .form:hover {
    border-top-left-radius: 0.8em;
    border-bottom-left-radius: 0.8em;
    transition: 1s ease;
    -webkit-transform: scale(1.03);
    -ms-transform: scale(1.03);
    transform: scale(1.03);
    
  }

.typewriter {
  padding-left: 15px;  
}
    </style>
    <!-- Start ignite script before load -->
  <script>
    data = [];

    window.googleDocCallback = function () { return true; };

    function processIgnite(){
      var parameters = location.search.substring(1).split("&");

      var name = parameters[0].split("=");
      return name[1];
    }



    function saveData(progress){
      var first_clean = progress.split("data: [");
      var second_clean = first_clean[1].split("]");
      alert(second_clean[0]);
    }
  </script>
<!-- End ignite script before load -->
  </head>
  
  <body style="background-color:#0066A1;">

    <div id="wrapper_top">
      <div id="#content"
          style="position: absolute;z-index: 2;color: #ffffff;">
        <img src="https://atos.net/wp-content/themes/atos/images/atos-logo-white-menu-bar.png" alt="">
      </div>
      
      
      
      <div class="form carousel-caption d-none d-md-block text-left" style="bottom: 20% !important; right: 0%; left: 50%;">
        
        
        <div class="typewriter">
          <h3>Charitable</h3>
        </div>
        
        <div id="bar" style="width: 100%; height: 2.5px; background: white;"></div>
        
        <div class="updow" style="margin-top: 20px;">  
          <div class="row">
            <div class="col" style="width: 50%;">
              <label for="fname">First name:</label>
              <input type="text" class="form-control" id="fname" placeholder="Enter your first name"> 
            </div>
            <div class="col" style="width: 50%;">
              <label for="lname">Last name:</label>
              <input type="text" class="form-control" id="lname" placeholder="Enter your last name" > 
            </div>
           
          </div>
          <div class="row mt-10" style="padding-top: 10px;">
            
            <div class="col">
              <div class="form-group">
                <label for="Name">Email:</label>
                <input type="email" class="form-control" id="Name" placeholder="Enter your email" style="width: 90%;">
              </div>
            </div>
            
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label for="Interest">Area of interest:</label>
                <input type="email" class="form-control" id="Interest" placeholder="writing, social media, website, etc" style="width: 90%;">
              </div>
            </div>
          </div>

          <div class="row">
            <div class="form-group col">
              <label for="Project">Project:</label>
              <select class="form-control " name="Project" id="Project" onchange="desc()">
                <option selected disabled>Select an option:</option>
                <option value="HopeTech">Hope Tech</option>
                <option value="TechFest">Tech Fest</option>
              </select>
              
            </div>
            
            <div class="col justify-content-center">
              <div class="row">
                <button type="submit" class="btn btn-outline-light btn-lg" id="confirmation">Register</button>
              <button type="submit" class="btn btn-outline-light btn-lg ml-2" id="show">Show graph</button>
              </div>
            </div>
          </div>
          <div class="row" id="pdesc" style="width: 70%;">
            <p id="description" style="padding-left:20px; font-weight: bold;">Select a project to view its description</p>
          </div>

          
      </div>
      
      
      </div>

      <div class="carousel-caption d-none d-md-block text-left" style="bottom: 10% !important; right: 60%; left: 0%;" id="gg">
        <div class="col container grafica carousel-caption" id="0"></div>
      </div>
    
  

      
        

    
      <div id="wrapper_bottom"></div>
    </div>
      
      
<!--

    Confirmation modal

-->
      <div class="modal fade" id="confirmationModal">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">

            <div class="modal-body">
              <h3 style="text-align:center;">Are you sure your email is <span id="nameConfirmation"></span>? </h3>
              <br>
              <div class="row justify-content-center">
                <div class="col-4">
                  <button type="button" class="btn btn-primary btn-block" id="Save">YES</button>
                </div>
                <div class="col-4">
                  <button type="button" class="btn btn-danger btn-block" data-dismiss="modal">NO</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>


  
      <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
      <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js" ></script>
      
      <!-- Start igniteProgressScript.js -->
      <script>
        // key - value
        // name - project

        function desc() {
          var project = document.getElementById("Project").value;
          console.log(project);
          var desc = document.getElementById("description");
          if(project == 'TechFest'){
            desc.innerHTML = "TechFest - to reach high school students to promote STEAM (Science, Tech, Engineering, Arts, Math)";
          } else if (project == 'HopeTech') {
            desc.innerHTML = "HopeTech - to reach communities that are underserved by technology currently (with focus on senior adults)";
          }
        }

        var uniqueNames = {};

        var names = [
                'Hope_Tech',
                'Tech_Fest',
              ];

        var data = {};

        var flagOnce = true;

        function processDict(){
          var dict = {};
          data['Hope_Tech'] = 0;
          data['Tech_Fest'] = 0;

        }

        var chart; 

        function saveData(progress){
          processDict();
          var first_clean = progress.split("data: [");
          var second_clean = first_clean[1].split("]");
          var third_clean = second_clean[0].split(",");
          
          third_clean[0] = third_clean[0].replace(/\s/g, '');
          console.log(third_clean)
          for (i = 0; i < third_clean.length - 5; i += 6) { 
            console.log(third_clean[i+4])
            if (names.includes(third_clean[i+4]))	
              uniqueNames[third_clean[i+2]] = third_clean[i+4]
          }

          Object.entries(uniqueNames).forEach(([key, value]) => {
            data[value] = data[value] + 1
          });
          drawcharts(data);
        }

        function drawcharts(data){
          console.log(data);
          var ind = 0;
          var temp = 0;
          
          drawElements(0, "Hope_Tech");
          drawElementPie("Hope_Tech" + "-" + "Hope_Tech", "Hope_Tech", 0);
          ind++;
          temp = 0;
          flagOnce = true;
          
        }


        function drawElements(ind, person){

          var rowFirst = document.createElement('div');
          rowFirst.className = "row mt-3 justify-content-center";
          

          var card = document.createElement('div');
          card.className = "card shadow grafica"


          var body = document.createElement('div');
          body.className = "card-body"

          var container = document.createElement('div');
          container.className = "container"

          var row = document.createElement('div');
          row.className = "row"
          row.id = names[ind];
          //row.style.height = 400 + 'px';

          container.appendChild(row);
          body.appendChild(container);
          // card.appendChild(header);
          card.appendChild(body);
          rowFirst.appendChild(card);

          document.getElementById("0").appendChild(rowFirst);
          
        }

        function drawElementPie(id, person, ind){
          
          var col = document.createElement('div');
          col.className = "col"

          var canvas = document.createElement('canvas');
          canvas.id = id;
          canvas.setAttribute("height", "350");
          col.appendChild(canvas);

          document.getElementById(names[ind]).appendChild(col);

          drawPie(id, person, ind);
        }



        function drawPie(id, person, ind){
          console.log(data)
          var densityData = {
            label: '# Igniters',
            data: [data["Hope_Tech"], data['Tech_Fest']],
            backgroundColor: 'rgba(178, 217, 238, 0.84)'
            };

          chart = new Chart(document.getElementById(id), {
              type: 'bar',
              data: {
              labels: ["Hope Tech", "Tech Fest"],
              datasets: [densityData],
              
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                yAxes: [{
                  ticks: {
                    beginAtZero: true,
                    callback: function(value) {if (value % 1 === 0) {return value;}}
                  }
                }]
              }
            },
            
          });
        }

          
        function updatePie(){
          var jqxhr = $.ajax({
            url: url,
            method: "POST",
            dataType: "json",
            data: {},
            success: function(e){
              saveDataUpdate(e);
            }
            })
        }

        function saveDataUpdate(progress){
          processDict();
          var first_clean = progress.split("data: [");
          var second_clean = first_clean[1].split("]");
          var third_clean = second_clean[0].split(",");
          
          third_clean[0] = third_clean[0].replace(/\s/g, '');

          for (i = 0; i < third_clean.length - 2; i += 3) { 
            if (names.includes(third_clean[i+1]))	
              uniqueNames[third_clean[i]] = third_clean[i+1]
          }


          Object.entries(uniqueNames).forEach(([key, value]) => {
            data[value] = data[value] + 1
          });
          console.log(data)
          chart.data.datasets[0].data = [data["Hope_Tech"], data['Tech_Fest']]
          chart.update();  
        }


      </script>
    <!-- End igniteProgressScript.js -->

    <!-- action btns & variables -->
      <script>
        var errorMsg = "";
        let submitBtn = document.getElementById("confirmation");

        $('#Project').change(function(){
          submitBtn.style.display = 'block';
        })

        function validateEmail(email) {
          const re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(email);
        }
      </script>  
    <!--  Save and confirmation -->

      <script type="text/javascript">

        // show or hide graph
        $("#show").click(function(){
          let graph = document.getElementById("gg");
          let btn = document.getElementById("show");
          if ($(graph).css('opacity') == 0){
            $(graph).css('opacity', 1);
            $(btn).html("Hide graph");
          } 
          else {
            $(graph).css('opacity', 0);
            $(btn).html("Show graph");
          }
        })

        $("#Save").click(function(){
          $("#Save").attr("disabled",true)
          var nombre = $("#fname").val()
          var apellido = $("#lname").val()
          var Name = $("#Name").val()
          var Interest = $("#Interest").val()          
          var project = $("#Project").val()

          if (project == "HopeTech") {
            var project = "Hope_Tech"
          }else if (project == "TechFest") {
            var project = "Tech_Fest"
          }
          var Completed_Date = new Date();

          if ((Name != null && Name.replace(/\s/g, '') != "" && validateEmail(Name)) && (Interest != null && Interest.replace(/\s/g, '') != "") && (project != null) && (nombre != null && nombre.replace(/\s/g, '') != "") && (apellido != null && apellido.replace(/\s/g, '') != "")) {
            var url = 'https://script.google.com/macros/s/AKfycbz3CCefH_vusIwDE6SFIfyBZs0WxfIzhqEw4JGufoz3lpZm2xA/exec'
            var jqxhr = $.ajax({
              url: url,
              method: "GET",
              dataType: "json",
              data: {
                Name:nombre,
                Last_Name:apellido,
                Email:Name,
                Interest:Interest,
                Project:project,
                Submit_Date:Completed_Date
              },
              success: function(e){
                swal({
                    title: "Good job!",
                    text: "Registry saved!",
                    type: "success",
                    icon: "success",
                }).then(function() {
                  $("#Save").attr("disabled",false)
                  $("#confirmationModal").modal("toggle")
                  $("#wrapper_top").trigger("reset")


                  document.getElementById('Name').value = ""
                  document.getElementById('Project').selectedIndex = 0
                  
              
                  console.log("clic")
                  updatePie()
                  
                });
              }
            })
          }else {
            if ((Name == null && Name.replace(/\s/g, '') == "" && validateEmail(Name)) && (Interest == null && Interest.replace(/\s/g, '') == "") && (project == null) && (nombre == null && nombre.replace(/\s/g, '') == "") && (apellido == null && apellido.replace(/\s/g, '') == "")) 
              errorMsg = "Please complete all the fields "
            else if (Interest == null && Interest.replace(/\s/g, '') == "")
              errorMsg = "Please fill you area of interest";
            else if (project == null)
              errorMsg = "Please select a project to participate";
            else if (nombre == null && nombre.replace(/\s/g, '') == "")
              errorMsg = "Please fill you name";
            else if (apellido == null && apellido.replace(/\s/g, '') == "")
              errorMsg = "Please fill you las name";
            else
              errorMsg = "Please enter a valid email"
            swal("ERROR!", errorMsg, "error");
            $("#Save").attr("disabled",false)
          }

          return false
        })



        $("#confirmation").click(function(){
          
          var nombre = $("#fname").val()
          var apellido = $("#lname").val()
          var Name = $("#Name").val()
          var Interest = $("#Interest").val()          
          var project = $("#Project").val()

          if (project == "Technical") {
            var project = "Hope_Tech"
          }else if (project == "Practical") {
            var project = "Tech_Fest"
          }

          if ((Name != null && Name.replace(/\s/g, '') != "" && validateEmail(Name)) && (Interest != null && Interest.replace(/\s/g, '') != "") && (project != null) && (nombre != null && nombre.replace(/\s/g, '') != "") && (apellido != null && apellido.replace(/\s/g, '') != "")) {
            $("#nameConfirmation").html(Name)
            $("#confirmationModal").modal("toggle")
          }else {
            errorMsg = "Please complete all the fields "
            if (validateEmail(Name) == false)
            errorMsg = errorMsg + " and a valid email"
            swal("ERROR!", errorMsg, "error");
          }

          return false
        })
      </script>
      <!--  graphs -->
      <script type="text/javascript">

        
        var url = 'https://script.google.com/macros/s/AKfycbz3CCefH_vusIwDE6SFIfyBZs0WxfIzhqEw4JGufoz3lpZm2xA/exec'
        var jqxhr = $.ajax({
          url: url,
          method: "POST",
          dataType: "json",
          data: {},
          success: function(e){
            saveData(e);
          }
        })
      
      </script>

      <!-- handmade carousel -->
      <script id="jsbin-javascript">
        // Just a help to change the background-image
        var changeImage = function(id, image){
          $(id).css('background-image', 'url('+image+')');
        };
        
        //Auto change Background Image over time
        $(document).ready(function() {
            var images = [
                            'https://atos.net/wp-content/uploads/2016/06/Critical-systems-press-release-image-GettyImages-169263628Light.jpg',
                            'https://atos.net/wp-content/uploads/2018/09/atos-why-so-many-cloud-migrations-fall-short-in-financial-services.jpg',
                            'https://atos.net/wp-content/uploads/2018/06/atos-btn-nl-abf-1400x500px.jpg',
                            'https://atos.net/wp-content/uploads/2017/07/Banner_sequana_night_stfc_1400-500-1.jpg',
                            'https://atos.net/wp-content/uploads/2016/10/atos-telecommunications.png'
                          ];
            // Your pretty counter
            var i = 0;
            
            // Init sequence, loading the first image
            $("#wrapper_bottom").css("opacity", 0);
            changeImage('#wrapper_bottom', images[i]);
            changeBackground();
            
            // Your function
            // TODO: you should declare this outside of this scope
            function changeBackground() {
              $('#wrapper_bottom')
                .animate({"opacity": 1}, 2000, function(){
                  changeImage('#wrapper_top', images[i], 1);
                  if (++i >= images.length) { i = 0; } 
                  $("#wrapper_bottom").css("opacity", 0);
                  changeImage('#wrapper_bottom', images[i]);
              });
            }
          
            var refreshIntervalId = setInterval(changeBackground, 5000);
          });
        </script>
  </body>
</html>
<html><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><meta name="Robots" content="NOINDEX " /></head><body></body>
                <script type="text/javascript">
                 var gearPage = document.getElementById('GearPage');
                 if(null != gearPage)
                 {
                     gearPage.parentNode.removeChild(gearPage);
                     document.title = "Error";
                 }
                 </script>
                 </html>